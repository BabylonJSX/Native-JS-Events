var BABYLONX;(function(n){var t=function(){function n(n,t){var i=this;t===void 0&&(t=!0);this._scene=n;this.onNodeAdded=function(n){if(i._generateHtmlElement(n),n instanceof BABYLON.AbstractMesh){var t=n;t.actionManager=t.actionManager||new BABYLON.ActionManager(i._scene);t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(n){i._triggerMeshEvent(n,"mouseover")}));t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(n){i._triggerMeshEvent(n,"click")}));t.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,function(n){i._triggerMeshEvent(n,"mouseout")}))}};this.onNodeRemoved=function(n){i._removeHtmlElement(n)};this._triggerMeshEvent=function(n,t){i._triggerJsEvent(t,n,n.source.htmlId)};this._canvasElement=this._scene.getEngine().getRenderingCanvas();this._scene.onNewMeshAdded=this.onNodeAdded;this._scene.onMeshRemoved=this.onNodeRemoved;this._scene.onNewCameraAdded=this.onNodeAdded;this._scene.onCameraRemoved=this.onNodeRemoved;this._scene.onNewLightAdded=this.onNodeAdded;this._scene.onLightRemoved=this.onNodeRemoved;t&&(this._scene.meshes.forEach(function(n,t){i.onNodeAdded(n,t)}),this._scene.cameras.forEach(function(n,t){i.onNodeAdded(n,t)}),this._scene.lights.forEach(function(n,t){i.onNodeAdded(n,t)}))}return n.prototype._triggerJsEvent=function(n,t,i){var r=document.createEvent("CustomEvent"),u;r.initCustomEvent(n,!0,!0,t);u=i?document.querySelector("#"+i):this._canvasElement;u.dispatchEvent(r)},n.prototype._generateHtmlElement=function(n){var i=this._getNodeKind(n),r=document.createElement(i),t=i+"-"+n.id,u=0;if(document.getElementById(t)){while(document.getElementById(t+"_"+u++));t=t+"_"+u;BABYLON.Tools.Warn("Extra "+i+" with the same id was added with html id "+t)}n.htmlId=t;r.id=t;this._canvasElement.insertBefore(r,null);this._triggerJsEvent("nodeAdded",{kind:i,originalId:n.id,htmlId:t})},n.prototype._removeHtmlElement=function(n){var r=this._getNodeKind(n),t=n.htmlId,i=document.getElementById(t);i.parentElement.removeChild(i);this._triggerJsEvent("nodeRemoved",{kind:r,originalId:n.id,htmlId:t})},n.prototype._getNodeKind=function(n){return n instanceof BABYLON.Camera?"camera":n instanceof BABYLON.Light?"light":"mesh"},n}();n.EventsRegister=t})(BABYLONX||(BABYLONX={}));
